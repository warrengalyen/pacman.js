<!DOCTYPE html>

<html>

<head>

    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="description" content="Pacman game written in HTML5 + CSS3 + jQuery." />
    <meta name="keywords" content="pacman, pac-man, pac-man online, pacman online, online, online games, games, free, puzzle, html, html5, css, css3, javascript, jquery, rwd, responsive, responsive web design, responsive web, web design, canvas, draw" />

    <link rel="stylesheet" type="text/css" href="css/pacman.css" />

    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.mobile.js"></script>
    <script type="text/javascript" src="js/paths.js"></script>
    <script type="text/javascript" src="js/bubbles.js"></script>
    <script type="text/javascript" src="js/pacman.js"></script>

    <script type="text/javascript">

        let KEYDOWN = false;
        let PAUSE = false;

        function pauseGame() {
            PAUSE = true;
            $("canvas").hide();
            stopPacman();
        }
        function resumeGame() {
            PAUSE = false;
            $("canvas").show();
            movePacman();
        }

        $(document).ready(function() {
            $.mobile.loading().hide();

            initPaths();
            drawPaths();

            initBubbles();
            drawBubbles();

            initPacman();
            drawPacman();

            $("body").keyup(function(e) {
                KEYDOWN = false;
            });

            $("body").keydown(function(e) {
                if (!KEYDOWN) {
                    KEYDOWN = true;
                    if (e.keyCode >= 37 && e.keyCode <= 40 && !PAUSE) {
                        if ( e.keyCode === 39 ) {
                            movePacman(1);
                        } else if ( e.keyCode === 40 ) {
                            movePacman(2);
                        } else if ( e.keyCode === 37 ) {
                            movePacman(3);
                        } else if ( e.keyCode === 38 ) {
                            movePacman(4);
                        }
                    } else if (e.keyCode === 68 && !PAUSE) {
                        if ( $("#canvas-paths").css("display") === "none" ) {
                            $("#canvas-paths").show();
                        } else {
                            $("#canvas-paths").hide();
                        }
                    } else if (e.keyCode === 80) {
                        if (PAUSE) {
                            resumeGame();
                        } else {
                            pauseGame();
                        }
                    }
                }
            });
        });
    </script>

    <title>Pac-Man</title>
</head>

<body>

<div id="panel">
    <h1>pa<em>c</em>-man<span>developing...</span></h1>
    <div id="board">
        <canvas id="canvas-paths"></canvas>
        <canvas id="canvas-bubbles"></canvas>
        <canvas id="canvas-pacman"></canvas>
    </div>
</div>

</body>

</html>
